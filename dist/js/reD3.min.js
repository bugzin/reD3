/*! reD3 2014-03-23 */
!function(a){function b(a,b){this.element=a,this.options=b,this.init()}a.reD3=a.reD3||{},b.prototype={init:function(){var a=this.options,b=a.width||960,c=a.height||500,d=a.margin,e={top:20,right:30,bottom:30,left:40},e=reD3.util.mixin(e,d);b=this.width=b-e.left-e.right,c=this.height=c-e.top-e.bottom;var f,g,h=this.xValue=a.xValue||"date",i=this.yValue=a.yValue||"value";f=this.x=d3.time.scale().range([0,b]),g=this.y=d3.scale.linear().range([c,0]),this.xAxis=d3.svg.axis().scale(f).orient("bottom"),this.yAxis=d3.svg.axis().scale(g).orient("left"),this.area=d3.svg.area().x(function(a){return f(a[h])}).y0(c).y1(function(a){return g(a[i])}),this.svg=d3.select(this.element).append("svg").attr("width",b+e.left+e.right).attr("height",c+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")")},render:function(a){var b=this.options,c=this.x,d=this.y,e=this.xAxis,f=this.yAxis,g=this.xValue,h=this.yValue,i=b.yAxisText||"",j=b.color||"steelblue",k=(this.width,this.height),l=this.area,m=this.svg;c.domain(d3.extent(a,function(a){return a[g]})),d.domain([0,d3.max(a,function(a){return a[h]})]),m.append("path").datum(a).attr("class","area").attr("d",l).attr("fill",j),m.append("g").attr("class","x axis").attr("transform","translate(0,"+k+")").call(e),m.append("g").attr("class","y axis").call(f).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text(i)},clear:function(){this.svg.selectAll("*").remove()}},reD3.Area=b}(this),function(a){function b(a,b){this.element=a,this.options=b,this.init()}a.reD3=a.reD3||{},b.prototype={init:function(){var a=this.options,b=a.width||960,c=a.height||500,d=a.margin,e={top:20,right:30,bottom:30,left:40};e=reD3.util.mixin(e,d),b=this.width=b-e.left-e.right,c=this.height=c-e.top-e.bottom,formatPercent=this.formatPercent=d3.format(".0%"),this.x=d3.scale.ordinal().rangeRoundBands([0,b],.1),this.y=d3.scale.linear().range([c,0]),this.xAxis=d3.svg.axis().scale(this.x).orient("bottom"),this.yAxis=d3.svg.axis().scale(this.y).orient("left").tickFormat(formatPercent),this.svg=d3.select(this.element).append("svg").attr("width",b+e.left+e.right).attr("height",c+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")")},render:function(a){var b=this.options,c=this.x,d=this.y,e=this.xAxis,f=this.yAxis,g=this.svg,h=(this.width,this.height),i=b.yAxisText||"",j=b.yValue||"frequency",k=b.xValue||"letter";c.domain(a.map(function(a){return a[k]})),d.domain([0,d3.max(a,function(a){return a[j]})]),g.append("g").attr("class","x axis").attr("transform","translate(0,"+h+")").call(e).append("text"),g.append("g").attr("class","y axis").call(f).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text(i),g.selectAll(".bar").data(a).enter().append("rect").attr("class","bar").attr("x",function(a){return c(a[k])}).attr("width",c.rangeBand()).attr("y",function(a){return d(a[j])}).attr("height",function(a){return h-d(a.frequency)}).on("mousedown",function(a){b.onClick&&b.onClick(a)}).on("mouseover",function(a){b.onMouseOver&&b.onMouseOver(a)}).on("mouseout",function(a){b.onMouseOut&&b.onMouseOut(a)})},clear:function(){this.svg.selectAll("*").remove()}},reD3.Bar=b}(this),function(a){function b(a,b){this.element=a,this.options=b,this.init()}a.reD3=a.reD3||{},b.prototype={init:function(){var a=this.options,b=a.diameter||640,c=d3.format(",d"),d=this.element,e=d3.scale.category20c(),f=d3.layout.pack().sort(null).size([b,b]).padding(1.5);this.svg=d3.select(d).append("svg").attr("width",b).attr("height",b).attr("class","bubble"),this.bubble=f,this.format=c,this.color=e},render:function(a){var b=this.svg,c=this.options,d=this;this.data=a;var e=b.selectAll(".node").data(d.bubble.nodes(a).filter(function(a){return!a.children})).enter().append("g").attr("class","node").attr("transform",function(a){return"translate("+a.x+","+a.y+")"});e.append("title").text(function(a){return a[c.text]+": "+d.format(a.value)}),e.append("circle").attr("r",function(a){return a.r}).style("fill",function(a){return d.color(a[c.color])}),e.append("text").attr("dy",".3em").style("text-anchor","middle").text(function(a){return a[c.text].substring(0,a.r/3)}),e.on("mousedown",function(a){c.onClick&&c.onClick(a)})},clear:function(){this.svg.selectAll(".node").remove()}},reD3.Bubble=b}(this),function(a){function b(a,b){this.element=a,this.options=b,this.init()}a.reD3=a.reD3||{},b.prototype={init:function(){var a=this.options,b=a.width||960,c=a.height||500,d=a.colors||["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],e=a.days||["Mo","Tu","We","Th","Fr","Sa","Su"],f=a.times||["1a","2a","3a","4a","5a","6a","7a","8a","9a","10a","11a","12a","1p","2p","3p","4p","5p","6p","7p","8p","9p","10p","11p","12p"],g=a.margin;this.days=e,this.times=f,this.colors=d;var h={top:20,right:30,bottom:30,left:40},i=Math.floor(b/24),j=2*i,k=9;this.gridSize=i,this.legendElementWidth=j,this.buckets=k,this.margin=h=reD3.util.mixin(h,g),this.width=b-this.margin.left-this.margin.right,this.height=c-this.margin.top-this.margin.bottom;{var l=this.svg=d3.select(this.element).append("svg").attr("width",b+h.left+h.right).attr("height",this.height+this.margin.top+this.margin.bottom).append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")");l.selectAll(".dayLabel").data(this.days).enter().append("text").text(function(a){return a}).attr("x",0).attr("y",function(a,b){return b*i}).style("text-anchor","end").attr("transform","translate(-6,"+i/1.5+")").attr("class",function(a,b){return b>=0&&4>=b?"dayLabel mono axis axis-workweek":"dayLabel mono axis"}),l.selectAll(".timeLabel").data(f).enter().append("text").text(function(a){return a}).attr("x",function(a,b){return b*i}).attr("y",0).style("text-anchor","middle").attr("transform","translate("+i/2+", -6)").attr("class",function(a,b){return b>=7&&16>=b?"timeLabel mono axis axis-worktime":"timeLabel mono axis"})}},render:function(a){var b=d3.scale.quantile().domain([0,this.buckets-1,d3.max(a,function(a){return a.value})]).range(this.colors),c=this.gridSize,d=this.legendElementWidth,c=(this.buckets,this.gridSize),e=this.colors,d=this.legendElementWidth,f=this.svg,g=this.margin,h=f.selectAll(".hour").data(a).enter().append("rect").attr("x",function(a){return(a.hour-1)*c}).attr("y",function(a){return(a.day-1)*c}).attr("rx",4).attr("ry",4).attr("class","hour bordered").attr("width",c).attr("height",c).style("fill",e[0]);h.transition().duration(1e3).style("fill",function(a){return b(a.value)}),h.append("title").text(function(a){return a.value});var i=f.selectAll(".legend").data([0].concat(b.quantiles()),function(a){return a}).enter().append("g").attr("class","legend");i.append("rect").attr("x",function(a,b){return d*b}).attr("y",this.height-g.bottom).attr("width",d).attr("height",c/2).style("fill",function(a,b){return e[b]}),i.append("text").attr("class","mono").text(function(a){return"â‰¥ "+Math.round(a)}).attr("x",function(a,b){return d*b}).attr("y",this.height+c-g.bottom)},clear:function(){this.svg.selectAll("*").remove()}},reD3.DayHourHeatmap=b}(this),function(a){function b(a,b){this.element=a,this.options=b,this.init()}a.reD3=a.reD3||{},b.prototype={init:function(){var a=this.options,b=a.width||960,c=a.height||500,d=a.xValue||"date",e=a.yValue||"value",f=a.margin;this.xValue=d,this.yValue=e,this.yAxisText=a.yAxisText||"";var g={top:20,right:30,bottom:30,left:40},g=reD3.util.mixin(g,f);b=this.width=b-g.left-g.right,c=this.height=c-g.top-g.bottom;var h=this.x=d3.time.scale().range([0,b]),i=this.y=d3.scale.linear().range([c,0]);this.xAxis=d3.svg.axis().scale(h).orient("bottom"),this.yAxis=d3.svg.axis().scale(i).orient("left"),this.line=d3.svg.line().x(function(a){return h(a[d])}).y(function(a){return i(a[e])}),this.svg=d3.select(this.element).append("svg").attr("width",b+g.left+g.right).attr("height",c+g.top+g.bottom).append("g").attr("transform","translate("+g.left+","+g.top+")")},render:function(a){var b=this.svg,c=this.x,d=this.y,e=this.xAxis,f=this.yAxis,g=this.height,h=this.xValue,i=this.yValue,j=this.yAxisText,k=this.line;c.domain(d3.extent(a,function(a){return a[h]})),d.domain(d3.extent(a,function(a){return a[i]})),b.append("g").attr("class","x axis").attr("transform","translate(0,"+g+")").call(e),b.append("g").attr("class","y axis").call(f).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text(j),b.append("path").datum(a).attr("class","line").attr("d",k)},clear:function(){this.svg.selectAll("*").remove()}},reD3.Line=b}(this),function(a){function b(a,b){this.element=a,this.options=b,this.init()}a.reD3=a.reD3||{},b.prototype={init:function(){var a=this.options,b=a.width||960,c=a.height||500,d=Math.min(b,c)/2,e=a.value||"value";this.text=a.text||"title",this.fieldColor=a.color||"title",this.color=d3.scale.category20(),this.arc=d3.svg.arc().outerRadius(d-10).innerRadius(0),this.pie=d3.layout.pie().sort(null).value(function(a){return a[e]}),this.svg=d3.select(this.element).append("svg").attr("width",b).attr("height",c).append("g").attr("transform","translate("+b/2+","+c/2+")")},render:function(a){var b=this.svg,c=this.pie,d=this.color,e=this.arc,f=this.fieldColor,g=this.text,h=this.options.onClick,i=b.selectAll(".arc").data(c(a)).enter().append("g").attr("class","arc");i.append("path").attr("d",e).style("fill",function(a){return d(a.data[f])}).on("click",function(a){h(a.data)}),i.append("text").attr("transform",function(a){return"translate("+e.centroid(a)+")"}).attr("dy",".35em").style("text-anchor","middle").text(function(a){return a.data[g]})},clear:function(){this.svg.selectAll("*").remove()}},reD3.Pie=b}(this),function(a){"use strict";function b(a,b){this.options=b,this.element=a,this.init()}a.reD3=a.reD3||{},b.prototype={init:function(){var a=this.options,b=a.interpolation||"cardinal",c=a.width||960,d=a.height||500,e=a.margin,f={top:20,right:30,bottom:30,left:40};f=reD3.util.mixin(f,e),c=this.width=c-f.left-f.right,d=this.height=d-f.top-f.bottom;var g=this.x=d3.time.scale().range([0,c]),h=this.y=d3.scale.linear().range([d,0]);this.color=d3.scale.category20c(),this.xAxis=d3.svg.axis().scale(g).orient("bottom").ticks(d3.time.days),this.yAxis=d3.svg.axis().scale(h).orient("left"),this.stack=d3.layout.stack().offset("zero").values(function(a){return a.values}).x(function(a){return a.date}).y(function(a){return a.value}),this.nest=d3.nest().key(function(a){return a.key}),this.area=d3.svg.area().interpolate(b).x(function(a){return g(a.date)}).y0(function(a){return h(a.y0)}).y1(function(a){return h(a.y0+a.y)}),this.svg=d3.select(this.element).append("svg").attr("width",c+f.left+f.right).attr("height",d+f.top+f.bottom).append("g").attr("transform","translate("+f.left+","+f.top+")")},render:function(a){var b=this.svg,c=this.x,d=this.y,e=this.color,f=this.xAxis,g=this.yAxis,h=this.stack,i=this.nest,j=this.area,k=this.height,l=h(i.entries(a));c.domain(d3.extent(a,function(a){return a.date})),d.domain([0,d3.max(a,function(a){return a.y0+a.y})]),b.selectAll(".layer").data(l).enter().append("path").attr("class","layer").attr("d",function(a){return j(a.values)}).style("fill",function(a,b){return e(b)}),b.append("g").attr("class","x axis").attr("transform","translate(0,"+k+")").call(f),b.append("g").attr("class","y axis").call(g)},clear:function(){this.svg.selectAll("*").remove()}},reD3.StackedArea=b}(this),function(a){function b(a,b){this.element=a,this.options=b,this.init()}a.reD3=a.reD3||{},b.prototype={init:function(){var a=this.options,b=a.width||960,c=a.height||500,d=(a.count||"count",d3.format(",d")),e=this.element,f=d3.scale.category20c(),g=d3.layout.treemap().size([b,c]),h={top:10,right:10,bottom:10,left:10};h=a.margin||h,b=b-h.left-h.right,c=c-h.top-h.bottom,this.svg=d3.select(e).append("svg").attr("width",b).attr("height",c).append("g").attr("class","mnode").attr("transform","translate("+h.left+","+h.top+")"),this.format=d,this.color=f,this.treemap=g},render:function(a){var b=this.svg,c=this.options,d=this.treemap,e=this.color;this.data=a,d.sticky(!0);var f=b.selectAll(".node").data(d.nodes(a).filter(function(a){return!a.children}));f.enter().append("g").attr("class","node").attr("transform",function(a){return"translate("+a.x+","+a.y+")"}),f.append("rect").attr("width",function(a){return Math.max(0,a.dx-1)}).attr("height",function(a){return Math.max(0,a.dy-1)}).style("fill",function(a){return e(a[c.color])}),f.append("svg:text").attr("x",0).attr("dx","0.35em").attr("dy","1.9em").text(function(a){return a[c.text]}).each(reD3.fontSize).each(reD3.wordWrap),f.on("mousedown",function(a){c.onClick(a)}),f.exit().remove()},clear:function(){this.svg.selectAll(".node").remove()}},reD3.Treemap=b}(this),function(a){function b(a){var b=a.dx/5.8,c=a.title.split(" "),d=c[0],e=a.dx,f=a.dy;for(d3.select(this).style("font-size",b+"px").text(d);(this.getBBox().width>=e||this.getBBox().height>=f)&&b>12;)b--,d3.select(this).style("font-size",b+"px"),this.firstChild.data=d}function c(a){var b,c=a.title.split(" "),d=new Array,e=0,f="",g=a.dx,h=a.dy;do if(b=c.shift(),d.push(b),this.firstChild.data=c.length?d.join(" ")+" "+c[0]:d.join(" "),e=this.getBBox().width,g>e&&c.length);else{if(f=d.join(" "),this.firstChild.data=f,this.getBBox().width>g){f=d3.select(this).select(function(){return this.lastChild}).text(),f+="...",d3.select(this).select(function(){return this.lastChild}).text(f),d3.select(this).classed("wordwrapped",!0);break}if(""!=f&&d3.select(this).append("svg:tspan").attr("x",0).attr("dx","0.15em").attr("dy","0.9em").text(f),this.getBBox().height>h&&c.length){f=d3.select(this).select(function(){return this.lastChild}).text(),f+="...",d3.select(this).select(function(){return this.lastChild}).text(f),d3.select(this).classed("wordwrapped",!0);break}d=new Array}while(c.length);this.firstChild.data=""}a.reD3=a.reD3||{},reD3.util={},reD3.fontSize=b,reD3.util.mixin=function(a,b){for(var c in b)a[c]=b[c];return a},reD3.wordWrap=c}(this);